<h1>Основы верстки электронных писем</h1>

<h2>Введение</h2>

<p>Создание электронных писем для рассылки иногда сложнее, чем веб-разработка. Ведь необходимо в одном файле сделать HTML-разметку, написать стили и подключить изображения. Все это ограничивается старой доброй табличной версткой… И это только полбеды. Вторая заключается в том, что письмо должно корректно отображаться в большом количестве почтовых клиентов от программ до веб-сервисов и еще на разных устройствах. В публикации рассматриваются основные принципы верстки электронного письма.</p>
<p>Электронное письмо – это один файл в формате HTML и в нем необходимо разместить HTML-код, прописать CSS-свойства и вставить изображения. Использование других файлов как в веб-разработке невозможно.</p>

<h2>1. Основные моменты</h2>

<h3>HTML:</h3>
<ul>
    <li>Верстка является табличной. Хотя большинство email-клиентов корректно отображают блочную верстку.</li>
    <li>Структура письма состоит из таблицы-контейнера и вложенных в нее таблицы-хедера, таблицы-контента, таблицы-футера.</li>
    <li>При верстке используются следующие теги: table, tbody, tr, td, img, a.</li>
    <li>Теги div, span, p применяются только в случае крайней необходимости.</li>
    <li>Из табличных тегов используются только table, tbody, tr, td. Теги thead и tfoot не воспринимаются некоторыми почтовыми сервисами.</li>
    <li>Вложенность таблиц не превышает 3.</li>
    <li>В таблицах (тегах table) используются следующие атрибуты: align, background, bgcolor, border, cellpadding, cellspacing, width.</li>
    <li>Email-клиент Почта Mail.Ru добавляет отступы. Чтобы этого не происходило, для тегов table добавляется класс pad_null.</li>
    <li>Для тегов table также прописываются CSS-свойства mso-table-lspace и mso-table-rspace. MS Outlook добавляет слева и справа отступы в таблицах. Чтобы убрать отступы, задаются указанные выше свойства с нулевым значением.</li>
    <li>Атрибуты background и bgcolor применяются только для тега table (некоторые email-клиенты не воспринимают данные свойства в других тегах).</li>
    <li>Теги tbody и tr используются без атрибутов и необходимы только для разметки.</li>
    <li>В тегах td возможно применение следующих атрибутов: align, valign, height, width.</li>
    <li>Для тегов td прописывают CSS-свойства margin и padding. Если они отсутствуют, то задаются нулевые значения.</li>
    <li>Не используются атрибуты colspan и rowspan.</li>
    <li>Для создания отступов применяется свойство padding внутри тега td. Способ создания отступов с помощью пустых ячеек устарел.</li>
</ul>

<h3>CSS:</h3>
<ul>
    <li>Стили задаются только инлайн для каждого тега отдельно.</li>
    <li>Желательно дублировать стили и в атрибутах, и в CSS-свойствах для корректного отображения письма как в старых, так и в новых email-клиентах.</li>
    <li>Значения цветов прописываются полностью из 6 знаков. Можно также использовать названия цветов: red, yellow, green и т.д.</li>
</ul>

<h3>JavaScript:</h3> 
<p>Не используется.</p>

<h3>Шрифты:</h3>
<ul>
    <li>Желательно, но не обязательно текст оборачивать в тег font и прописывать в нем стили шрифта (название шрифта, цвет, размер).</li>
    <li>Применяются только стандартные шрифты. Например: Arial, Helvetica, sans-serif.</li>
    <li>Не используются CSS-сокращения в свойствах font. Название CSS-свойства прописывают полностью (font-family, font-size, font-weight, font-style, line-height).</li>
    <li>Свойство text-size-adjust с префиксами moz, ms и webkit тестировали на различных устройствах, но, например, в почтовом клиенте Windows Phone при значениях none, 100% или 150% размер шрифта остается неизменным. Поэтому пока решили временно отказаться от использования этого свойства.</li>
</ul>	

<h3>Изображения (тег img):</h3>
<ul>
    <li>Изображения в письме вставляются с помощью ссылки на них. Сами изображения хранятся на веб-сервере.</li>
    <li>Используются следующие атрибуты: alt с пустым значением, border, height, width.</li>
    <li>Атрибуты обтекания текста для тега img (align, vspace, hspace) не работают.</li>
    <li>Для фоновых изображений лучше использовать атрибут background вместо CSS. При этом MS Outlook 2007 отображает фоновые изображения только в теге body.</li>
    <li>Задаются CSS-свойства: display: block, outline: none и -ms-interpolation-mode: bicubic. Последнее необходимо для более качественного отображения картинок в браузерах семейства Internet Explorer, начиная с 7-й версии. </li>
</ul>

<h3>Ссылки (тег a):</h3>
<p>Всегда добавляется атрибут target со значением _blank. Хотя большинство почтовых клиентов по умолчанию открывают ссылку в новом окне.</p>

<h2>Почтовые клиенты</h2>
<ul>
    <li>Cервисы: AOL Mail, Gmail, Yahoo! Mail, Почта Mail.Ru, Рамблер.Почта, Яндекс.Почта.</li>
    <li>Программы:  Apple Mail, Foxmail, Hotmail, Lotus Notes, Mozilla Thunderbird, MS Outlook, Opera Mail, The Bat!, Windows Live Mail.</li>
</ul>

<h2>Полезные ссылки</h2>

<h3>Сервисы email-рассылок:</h3>
<ul>
    <li><a href="https://www.campaignmonitor.com/">https://www.campaignmonitor.com/</a></li>
    <li><a href="http://mailchimp.com/">http://mailchimp.com/</a></li>
</ul> 

<h3>CSS-инлайнеры:</h3>
<ul>
    <li><a href="https://inliner.cm/ ">https://inliner.cm/ </a></li>
    <li><a href="http://templates.mailchimp.com/resources/inline-css/">http://templates.mailchimp.com/resources/inline-css/</a></li>
</ul> 

<h3>Таблицы использования CSS-свойств в почтовых клиентах:</h3>
<ul>
    <li><a href="https://www.campaignmonitor.com/css/ ">https://www.campaignmonitor.com/css/ </a></li>
    <li><a href="http://templates.mailchimp.com/resources/email-client-css-support/">http://templates.mailchimp.com/resources/email-client-css-support/</a></li>
</ul>
